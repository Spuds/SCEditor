/* SCEditor v1.5.4 | (C) 2017, Sam Clarke | sceditor.com/license */

!function(g){"use strict";var l=g.sceditor,h=l.plugins,x=l.dom,t={bold:{txtExec:["<strong>","</strong>"]},italic:{txtExec:["<em>","</em>"]},underline:{txtExec:['<span style="text-decoration: underline;">',"</span>"]},strike:{txtExec:['<span style="text-decoration: line-through;">',"</span>"]},subscript:{txtExec:["<sub>","</sub>"]},superscript:{txtExec:["<sup>","</sup>"]},left:{txtExec:['<div style="text-align: left;">',"</div>"]},center:{txtExec:['<div style="text-align: center;">',"</div>"]},right:{txtExec:['<div style="text-align: right;">',"</div>"]},justify:{txtExec:['<div style="text-align: justify;">',"</div>"]},font:{txtExec:function(t){var e=this;l.command.get("font")._dropDown(e,t,function(t){e.insertText('<span style="font-family: '+t+';">',"</span>")})}},size:{txtExec:function(t){var e=this;l.command.get("size")._dropDown(e,t,function(t){e.insertText('<span style="font-size: '+t+';">',"</span>")})}},color:{txtExec:function(t){var e=this;l.command.get("color")._dropDown(e,t,function(t){e.insertText('<span style="color: '+t+';">',"</span>")})}},bulletlist:{txtExec:["<ul><li>","</li></ul>"]},orderedlist:{txtExec:["<ol><li>","</li></ol>"]},table:{txtExec:["<table><tr><td>","</td></tr></table>"]},horizontalrule:{txtExec:["<hr />"]},code:{txtExec:["<code>","</code>"]},image:{txtExec:function(t,e){var n=prompt(this._("Enter the image URL:"),e);n&&this.insertText('<img src="'+n+'" />')}},email:{txtExec:function(t,e){var n,i,r=e&&-1<e.indexOf("@")?null:e;n=prompt(this._("Enter the e-mail address:"),r?"":e),i=prompt(this._("Enter the displayed text:"),r||n)||n,n&&this.insertText('<a href="mailto:'+n+'">'+i+"</a>")}},link:{txtExec:function(t,e){var n=e&&-1<e.indexOf("http://")?null:e,i=prompt(this._("Enter URL:"),n?"http://":e),r=prompt(this._("Enter the displayed text:"),n||i)||i;i&&this.insertText('<a href="'+i+'">'+r+"</a>")}},quote:{txtExec:["<blockquote>","</blockquote>"]},youtube:{txtExec:function(t){var e=this;l.command.get("youtube")._dropDown(e,t,function(t){e.insertText('<iframe width="560" height="315" src="https://www.youtube.com/embed/{id}?wmode=opaque" data-youtube-id="'+t+'" frameborder="0" allowfullscreen></iframe>')})}},rtl:{txtExec:['<div stlye="direction: rtl;">',"</div>"]},ltr:{txtExec:['<div stlye="direction: ltr;">',"</div>"]}};l.XHTMLSerializer=function(){var f,i,d,n,r,o,a,s,v,h,c="\t",l=[],m=0;f=function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};return t?t.replace(/[&<>"]/g,function(t){return e[t]||t}):""},i=function(t){return t.replace(/[\r\n]/," ").replace(/[^\S|\u00A0]+/g," ")},this.serialize=function(t,e){if(l=[],e)for(t=t.firstChild;t;)d(t),t=t.nextSibling;else d(t);return l.join("")},d=function(t,e){switch(t.nodeType){case 1:"!"===t.nodeName.toLowerCase()?a(t):r(t,e);break;case 3:s(t,e);break;case 4:o(t);break;case 8:a(t);break;case 9:case 11:n(t)}},n=function(t){for(var e=t.firstChild;e;)d(e),e=e.nextSibling},r=function(t,e){var n,i,r,o=t.nodeName.toLowerCase(),a="iframe"===o,s=t.attributes.length,c=t.firstChild,l=e||/pre(?:\-wrap)?$/i.test(g(t).css("whiteSpace")),u=!t.firstChild&&!x.canHaveChildren(t)&&!a;if(!g(t).hasClass("sceditor-ignore")){for(v("<"+o,!e&&h(t));s--;)r=(i=t.attributes[s]).value,v(" "+i.name.toLowerCase()+'="'+f(r)+'"',!1);for(v(u?" />":">",!1),a||(n=c);n;)m++,d(n,l),n=n.nextSibling,m--;u||v("</"+o+">",!l&&!a&&h(t)&&c&&h(c))}},o=function(t){v("<![CDATA["+f(t.nodeValue)+"]]>")},a=function(t){v("\x3c!-- "+f(t.nodeValue)+" --\x3e")},s=function(t,e){var n=t.nodeValue;e||(n=i(n)),n&&v(f(n),!e&&h(t))},v=function(t,e){var n=m;if(!1!==e)for(l.length&&l.push("\n");n--;)l.push(c);l.push(t)},h=function(t){var e=t.previousSibling;return 1!==t.nodeType&&e?!x.isInline(e):!e&&!x.isInline(t.parentNode)||!x.isInline(t)}},h.xhtml=function(){var n,i,v,r,f,o,a,s=this,c={},d={};s.init=function(){g.isEmptyObject(h.xhtml.converters||{})||g.each(h.xhtml.converters,function(t,e){g.each(e.tags,function(t){c[t]||(c[t]=[]),c[t].push(e)})}),this.commands=g.extend(!0,{},t,this.commands)},s.signalToSource=function(t,e){return e=e.jquery?e[0]:e,n(e),r(e),o(e),a(e),(new l.XHTMLSerializer).serialize(e,!0)},s.signalToWysiwyg=function(t){return t},s.convertTagTo=x.convertElement,i=function(e,i,r){c[e]&&g.each(c[e],function(t,n){n.tags[e]?g.each(n.tags[e],function(t,e){r.getAttributeNode&&(t=r.getAttributeNode(t))&&(e&&g.inArray(t.value,e)<0||n.conv.call(s,r,i))}):n.conv&&n.conv.call(s,r,i)})},n=function(t){x.traverse(t,function(t){var e=g(t),n=t.nodeName.toLowerCase();i("*",e,t),i(n,e,t)},!0)},v=function(t,e){var n=t.childNodes,i=t.nodeName.toLowerCase(),r=t.nodeValue,o=n.length;if(e&&"br"===i)return!0;if(g(t).hasClass("sceditor-ignore"))return!0;if(!x.canHaveChildren(t))return!1;if(r&&/\S|\u00A0/.test(r))return!1;for(;o--;)if(!v(n[o],e&&!t.previousSibling&&!t.nextSibling))return!1;return!0},r=function(d){x.traverse(d,function(t){var e,n=t.nodeName.toLowerCase(),i=t.parentNode,r=t.nodeType,o=!x.isInline(t),a=t.previousSibling,s=t.nextSibling,c="iframe"!==n&&v(t,i===d&&(!a&&!s)&&"br"!==n),l=t.ownerDocument,u=h.xhtml.allowedTags,f=h.xhtml.disallowedTags;if(3!==r&&(4===r?n="!cdata":"!"!==n&&8!==r||(n="!comment"),c?e=!0:u&&u.length?e=g.inArray(n,u)<0:f&&f.length&&(e=-1<g.inArray(n,f)),e)){if(!c){for(o&&a&&x.isInline(a)&&i.insertBefore(l.createTextNode(" "),t);t.firstChild;)i.insertBefore(t.firstChild,s);o&&s&&x.isInline(s)&&i.insertBefore(l.createTextNode(" "),s)}i.removeChild(t)}},!0)},f=function(t,e){var n={};return t&&g.extend(n,t),e&&g.each(e,function(t,e){g.isArray(e)?n[t]=g.merge(n[t]||[],e):n[t]||(n[t]=null)}),n},a=function(t){var e=[],n=function(){e.length&&(g("<p>",t.ownerDocument).insertBefore(e[0]).append(e),e=[])};x.removeWhiteSpace(t);for(var i=t.firstChild;i;)x.isInline(i)&&!g(i).is(".sceditor-ignore")?e.push(i):n(),i=i.nextSibling;n()},o=function(t){var e,n,i,r,o,a,s=h.xhtml.allowedAttribs,c=s&&!g.isEmptyObject(s),l=h.xhtml.disallowedAttribs,u=l&&!g.isEmptyObject(l);d={},x.traverse(t,function(t){if(t.attributes&&(e=t.nodeName.toLowerCase(),r=t.attributes.length))for(d[e]||(d[e]=c?f(s["*"],s[e]):f(l["*"],l[e]));r--;)n=t.attributes[r],i=n.name,o=d[e][i],a=!1,c?a=null!==o&&(!g.isArray(o)||g.inArray(n.value,o)<0):u&&(a=null===o||g.isArray(o)&&-1<g.inArray(n.value,o)),a&&t.removeAttribute(i)})}},h.xhtml.converters=[{tags:{"*":{width:null}},conv:function(t,e){e.css("width",e.attr("width")).removeAttr("width")}},{tags:{"*":{height:null}},conv:function(t,e){e.css("height",e.attr("height")).removeAttr("height")}},{tags:{li:{value:null}},conv:function(t,e){e.removeAttr("value")}},{tags:{"*":{text:null}},conv:function(t,e){e.css("color",e.attr("text")).removeAttr("text")}},{tags:{"*":{color:null}},conv:function(t,e){e.css("color",e.attr("color")).removeAttr("color")}},{tags:{"*":{face:null}},conv:function(t,e){e.css("fontFamily",e.attr("face")).removeAttr("face")}},{tags:{"*":{align:null}},conv:function(t,e){e.css("textAlign",e.attr("align")).removeAttr("align")}},{tags:{"*":{border:null}},conv:function(t,e){e.css("borderWidth",e.attr("border")).removeAttr("border")}},{tags:{applet:{name:null},img:{name:null},layer:{name:null},map:{name:null},object:{name:null},param:{name:null}},conv:function(t,e){e.attr("id")||e.attr("id",e.attr("name")),e.removeAttr("name")}},{tags:{"*":{vspace:null}},conv:function(t,e){e.css("marginTop",e.attr("vspace")-0).css("marginBottom",e.attr("vspace")-0).removeAttr("vspace")}},{tags:{"*":{hspace:null}},conv:function(t,e){e.css("marginLeft",e.attr("hspace")-0).css("marginRight",e.attr("hspace")-0).removeAttr("hspace")}},{tags:{hr:{noshade:null}},conv:function(t,e){e.css("borderStyle","solid").removeAttr("noshade")}},{tags:{"*":{nowrap:null}},conv:function(t,e){e.css("white-space","nowrap").removeAttr("nowrap")}},{tags:{big:null},conv:function(t){g(this.convertTagTo(t,"span")).css("fontSize","larger")}},{tags:{small:null},conv:function(t){g(this.convertTagTo(t,"span")).css("fontSize","smaller")}},{tags:{b:null},conv:function(t){g(this.convertTagTo(t,"strong"))}},{tags:{u:null},conv:function(t){g(this.convertTagTo(t,"span")).css("textDecoration","underline")}},{tags:{s:null,strike:null},conv:function(t){g(this.convertTagTo(t,"span")).css("textDecoration","line-through")}},{tags:{dir:null},conv:function(t){this.convertTagTo(t,"ul")}},{tags:{center:null},conv:function(t){g(this.convertTagTo(t,"div")).css("textAlign","center")}},{tags:{font:{size:null}},conv:function(t,e){var n=e.css("fontSize");"+0"!==n&&e.css("fontSize",n),e.removeAttr("size")}},{tags:{font:null},conv:function(t){this.convertTagTo(t,"span")}},{tags:{"*":{type:["_moz"]}},conv:function(t,e){e.removeAttr("type")}},{tags:{"*":{_moz_dirty:null}},conv:function(t,e){e.removeAttr("_moz_dirty")}},{tags:{"*":{_moz_editor_bogus_node:null}},conv:function(t,e){e.remove()}}],h.xhtml.allowedAttribs={},h.xhtml.disallowedAttribs={},h.xhtml.allowedTags=[],h.xhtml.disallowedTags=[]}(jQuery);