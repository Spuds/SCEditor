/* SCEditor v1.5.3 | (C) 2017, Sam Clarke | sceditor.com/license */

!function(t){"use strict";var e=t.sceditor,n=e.plugins,i=e.dom,r={bold:{txtExec:["<strong>","</strong>"]},italic:{txtExec:["<em>","</em>"]},underline:{txtExec:['<span style="text-decoration: underline;">',"</span>"]},strike:{txtExec:['<span style="text-decoration: line-through;">',"</span>"]},subscript:{txtExec:["<sub>","</sub>"]},superscript:{txtExec:["<sup>","</sup>"]},left:{txtExec:['<div style="text-align: left;">',"</div>"]},center:{txtExec:['<div style="text-align: center;">',"</div>"]},right:{txtExec:['<div style="text-align: right;">',"</div>"]},justify:{txtExec:['<div style="text-align: justify;">',"</div>"]},font:{txtExec:function(t){var n=this;e.command.get("font")._dropDown(n,t,function(t){n.insertText('<span style="font-family: '+t+';">',"</span>")})}},size:{txtExec:function(t){var n=this;e.command.get("size")._dropDown(n,t,function(t){n.insertText('<span style="font-size: '+t+';">',"</span>")})}},color:{txtExec:function(t){var n=this;e.command.get("color")._dropDown(n,t,function(t){n.insertText('<span style="color: '+t+';">',"</span>")})}},bulletlist:{txtExec:["<ul><li>","</li></ul>"]},orderedlist:{txtExec:["<ol><li>","</li></ol>"]},table:{txtExec:["<table><tr><td>","</td></tr></table>"]},horizontalrule:{txtExec:["<hr />"]},code:{txtExec:["<code>","</code>"]},image:{txtExec:function(t,e){var n=prompt(this._("Enter the image URL:"),e);n&&this.insertText('<img src="'+n+'" />')}},email:{txtExec:function(t,e){var n,i,r=e&&e.indexOf("@")>-1?null:e;n=prompt(this._("Enter the e-mail address:"),r?"":e),i=prompt(this._("Enter the displayed text:"),r||n)||n,n&&this.insertText('<a href="mailto:'+n+'">'+i+"</a>")}},link:{txtExec:function(t,e){var n=e&&e.indexOf("http://")>-1?null:e,i=prompt(this._("Enter URL:"),n?"http://":e),r=prompt(this._("Enter the displayed text:"),n||i)||i;i&&this.insertText('<a href="'+i+'">'+r+"</a>")}},quote:{txtExec:["<blockquote>","</blockquote>"]},youtube:{txtExec:function(t){var n=this;e.command.get("youtube")._dropDown(n,t,function(t){n.insertText('<iframe width="560" height="315" src="https://www.youtube.com/embed/{id}?wmode=opaque" data-youtube-id="'+t+'" frameborder="0" allowfullscreen></iframe>')})}},rtl:{txtExec:['<div stlye="direction: rtl;">',"</div>"]},ltr:{txtExec:['<div stlye="direction: ltr;">',"</div>"]}};e.XHTMLSerializer=function(){var e,n,r,o,a,s,c,l,u,f,d={indentStr:"\t"},v=[],h=0;e=function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};return t?t.replace(/[&<>"]/g,function(t){return e[t]||t}):""},n=function(t){return t.replace(/[\r\n]/," ").replace(/[^\S|\u00A0]+/g," ")},this.serialize=function(t,e){if(v=[],e)for(t=t.firstChild;t;)r(t),t=t.nextSibling;else r(t);return v.join("")},r=function(t,e){switch(t.nodeType){case 1:"!"===t.nodeName.toLowerCase()?c(t):a(t,e);break;case 3:l(t,e);break;case 4:s(t);break;case 8:c(t);break;case 9:case 11:o(t)}},o=function(t){for(var e=t.firstChild;e;)r(e),e=e.nextSibling},a=function(n,o){var a,s,c,l=n.nodeName.toLowerCase(),d="iframe"===l,v=n.attributes.length,m=n.firstChild,g=o||/pre(?:\-wrap)?$/i.test(t(n).css("whiteSpace")),x=!n.firstChild&&!i.canHaveChildren(n)&&!d;if(!t(n).hasClass("sceditor-ignore")){for(u("<"+l,!o&&f(n));v--;)c=(s=n.attributes[v]).value,u(" "+s.name.toLowerCase()+'="'+e(c)+'"',!1);for(u(x?" />":">",!1),d||(a=m);a;)h++,r(a,g),a=a.nextSibling,h--;x||u("</"+l+">",!g&&!d&&f(n)&&m&&f(m))}},s=function(t){u("<![CDATA["+e(t.nodeValue)+"]]>")},c=function(t){u("\x3c!-- "+e(t.nodeValue)+" --\x3e")},l=function(t,i){var r=t.nodeValue;i||(r=n(r)),r&&u(e(r),!i&&f(t))},u=function(t,e){var n=h;if(!1!==e)for(v.length&&v.push("\n");n--;)v.push(d.indentStr);v.push(t)},f=function(t){var e=t.previousSibling;return 1!==t.nodeType&&e?!i.isInline(e):!e&&!i.isInline(t.parentNode)||!i.isInline(t)}},n.xhtml=function(){var o,a,s,c,l,u,f,d=this,v={},h={};d.init=function(){t.isEmptyObject(n.xhtml.converters||{})||t.each(n.xhtml.converters,function(e,n){t.each(n.tags,function(t){v[t]||(v[t]=[]),v[t].push(n)})}),this.commands=t.extend(!0,{},r,this.commands)},d.signalToSource=function(t,n){return n=n.jquery?n[0]:n,o(n),c(n),u(n),f(n),(new e.XHTMLSerializer).serialize(n,!0)},d.signalToWysiwyg=function(t){return t},d.convertTagTo=i.convertElement,a=function(e,n,i){v[e]&&t.each(v[e],function(r,o){o.tags[e]?t.each(o.tags[e],function(e,r){i.getAttributeNode&&(e=i.getAttributeNode(e))&&(r&&t.inArray(e.value,r)<0||o.conv.call(d,i,n))}):o.conv&&o.conv.call(d,i,n)})},o=function(e){i.traverse(e,function(e){var n=t(e),i=e.nodeName.toLowerCase();a("*",n,e),a(i,n,e)},!0)},s=function(e,n){var r=e.childNodes,o=e.nodeName.toLowerCase(),a=e.nodeValue,c=r.length;if(n&&"br"===o)return!0;if(t(e).hasClass("sceditor-ignore"))return!0;if(!i.canHaveChildren(e))return!1;if(a&&/\S|\u00A0/.test(a))return!1;for(;c--;)if(!s(r[c],n&&!e.previousSibling&&!e.nextSibling))return!1;return!0},c=function(e){i.traverse(e,function(r){var o,a=r.nodeName.toLowerCase(),c=r.parentNode,l=r.nodeType,u=!i.isInline(r),f=r.previousSibling,d=r.nextSibling,v=c===e,h=!f&&!d,m="iframe"!==a&&s(r,v&&h&&"br"!==a),g=r.ownerDocument,x=n.xhtml.allowedTags,p=n.xhtml.disallowedTags;if(3!==l&&(4===l?a="!cdata":"!"!==a&&8!==l||(a="!comment"),m?o=!0:x&&x.length?o=t.inArray(a,x)<0:p&&p.length&&(o=t.inArray(a,p)>-1),o)){if(!m){for(u&&f&&i.isInline(f)&&c.insertBefore(g.createTextNode(" "),r);r.firstChild;)c.insertBefore(r.firstChild,d);u&&d&&i.isInline(d)&&c.insertBefore(g.createTextNode(" "),d)}c.removeChild(r)}},!0)},l=function(e,n){var i={};return e&&t.extend(i,e),n?(t.each(n,function(e,n){t.isArray(n)?i[e]=t.merge(i[e]||[],n):i[e]||(i[e]=null)}),i):i},f=function(e){var n=[],r=function(){n.length&&(t("<p>",e.ownerDocument).insertBefore(n[0]).append(n),n=[])};i.removeWhiteSpace(e);for(var o=e.firstChild;o;)i.isInline(o)&&!t(o).is(".sceditor-ignore")?n.push(o):r(),o=o.nextSibling;r()},u=function(e){var r,o,a,s,c,u,f=n.xhtml.allowedAttribs,d=f&&!t.isEmptyObject(f),v=n.xhtml.disallowedAttribs,m=v&&!t.isEmptyObject(v);h={},i.traverse(e,function(e){if(e.attributes&&(r=e.nodeName.toLowerCase(),s=e.attributes.length))for(h[r]||(h[r]=d?l(f["*"],f[r]):l(v["*"],v[r]));s--;)o=e.attributes[s],a=o.name,c=h[r][a],u=!1,d?u=null!==c&&(!t.isArray(c)||t.inArray(o.value,c)<0):m&&(u=null===c||t.isArray(c)&&t.inArray(o.value,c)>-1),u&&e.removeAttribute(a)})}},n.xhtml.converters=[{tags:{"*":{width:null}},conv:function(t,e){e.css("width",e.attr("width")).removeAttr("width")}},{tags:{"*":{height:null}},conv:function(t,e){e.css("height",e.attr("height")).removeAttr("height")}},{tags:{li:{value:null}},conv:function(t,e){e.removeAttr("value")}},{tags:{"*":{text:null}},conv:function(t,e){e.css("color",e.attr("text")).removeAttr("text")}},{tags:{"*":{color:null}},conv:function(t,e){e.css("color",e.attr("color")).removeAttr("color")}},{tags:{"*":{face:null}},conv:function(t,e){e.css("fontFamily",e.attr("face")).removeAttr("face")}},{tags:{"*":{align:null}},conv:function(t,e){e.css("textAlign",e.attr("align")).removeAttr("align")}},{tags:{"*":{border:null}},conv:function(t,e){e.css("borderWidth",e.attr("border")).removeAttr("border")}},{tags:{applet:{name:null},img:{name:null},layer:{name:null},map:{name:null},object:{name:null},param:{name:null}},conv:function(t,e){e.attr("id")||e.attr("id",e.attr("name")),e.removeAttr("name")}},{tags:{"*":{vspace:null}},conv:function(t,e){e.css("marginTop",e.attr("vspace")-0).css("marginBottom",e.attr("vspace")-0).removeAttr("vspace")}},{tags:{"*":{hspace:null}},conv:function(t,e){e.css("marginLeft",e.attr("hspace")-0).css("marginRight",e.attr("hspace")-0).removeAttr("hspace")}},{tags:{hr:{noshade:null}},conv:function(t,e){e.css("borderStyle","solid").removeAttr("noshade")}},{tags:{"*":{nowrap:null}},conv:function(t,e){e.css("white-space","nowrap").removeAttr("nowrap")}},{tags:{big:null},conv:function(e){t(this.convertTagTo(e,"span")).css("fontSize","larger")}},{tags:{small:null},conv:function(e){t(this.convertTagTo(e,"span")).css("fontSize","smaller")}},{tags:{b:null},conv:function(e){t(this.convertTagTo(e,"strong"))}},{tags:{u:null},conv:function(e){t(this.convertTagTo(e,"span")).css("textDecoration","underline")}},{tags:{s:null,strike:null},conv:function(e){t(this.convertTagTo(e,"span")).css("textDecoration","line-through")}},{tags:{dir:null},conv:function(t){this.convertTagTo(t,"ul")}},{tags:{center:null},conv:function(e){t(this.convertTagTo(e,"div")).css("textAlign","center")}},{tags:{font:{size:null}},conv:function(t,e){var n=e.css("fontSize");"+0"!==n&&e.css("fontSize",n),e.removeAttr("size")}},{tags:{font:null},conv:function(t){this.convertTagTo(t,"span")}},{tags:{"*":{type:["_moz"]}},conv:function(t,e){e.removeAttr("type")}},{tags:{"*":{_moz_dirty:null}},conv:function(t,e){e.removeAttr("_moz_dirty")}},{tags:{"*":{_moz_editor_bogus_node:null}},conv:function(t,e){e.remove()}}],n.xhtml.allowedAttribs={},n.xhtml.disallowedAttribs={},n.xhtml.allowedTags=[],n.xhtml.disallowedTags=[]}(jQuery);